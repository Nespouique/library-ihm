@tailwind base;
@tailwind components;
@tailwind utilities;

@layer base {
    :root {
        --background: 220 23% 97%; /* Slightly lighter background */
        --foreground: 220 9% 15%; /* Slightly darker foreground for better contrast */
        --card: 0 0% 100%;
        --card-foreground: 220 9% 15%;
        --popover: 0 0% 100%;
        --popover-foreground: 220 9% 15%;
        --primary: 262 70% 55%; /* Adjusted primary color, less vibrant */
        --primary-foreground: 210 40% 98%;
        --secondary: 220 14% 93%; /* Adjusted secondary color */
        --secondary-foreground: 220 9% 40%;
        --muted: 220 14% 93%;
        --muted-foreground: 220 9% 40%;
        --accent: 220 14% 93%;
        --accent-foreground: 220 9% 40%;
        --destructive: 0 70% 55%; /* Adjusted destructive color */
        --destructive-foreground: 210 40% 98%;
        --border: 220 13% 88%; /* Adjusted border color */
        --input: 220 13% 88%;
        --ring: 262 70% 55%;
        --radius: 0.5rem; /* Slightly smaller radius for a flatter look */
    }
}

@layer base {
    * {
        @apply border-border;
    }

    html {
        /* Force l'affichage permanent de la barre de défilement pour éviter le décalage horizontal */
        overflow-y: scroll;
        /* Propriété moderne pour les navigateurs récents - réserve l'espace pour la scrollbar */
        scrollbar-gutter: stable;
    }

    body {
        @apply bg-background text-foreground min-h-screen; /* Solid background */
        font-feature-settings:
            'rlig' 1,
            'calt' 1;
    }

    /* Fix pour empêcher le décalage causé par les modales Radix UI */
    /* Solution la plus robuste avec spécificité maximale */
    html body[data-scroll-locked],
    html body[data-scroll-locked][style*='margin-right'] {
        margin-right: 0 !important;
        padding-right: 0 !important;
        padding-left: 0 !important;
    }
    
    /* Fix pour le scroll vers les éléments - compense la hauteur du header fixe */
    .book-card,
    .author-card,
    .shelf-card {
        scroll-margin-top: calc(4rem + 1rem); /* Hauteur du header (h-16 = 4rem) + marge supplémentaire */
    }
}

@layer components {
    .flat-nav {
        @apply bg-background/95 backdrop-blur-md border-b border-border shadow-md sticky top-0 z-40;
    }

    .glass-effect {
        /* Legacy class - kept for compatibility */
        @apply bg-white/80 backdrop-blur-md border-b border-border shadow-md;
    }

    .main-title-text {
        /* Replaced gradient-text */
        @apply text-primary;
    }

    .floating-button {
        @apply fixed bottom-8 right-8 w-14 h-14 bg-primary rounded-full shadow-lg hover:bg-primary/90 transition-colors duration-200 flex items-center justify-center text-white z-50; /* No gradient, no scale animation */
    }

    .search-glow {
        @apply focus:ring-2 focus:ring-ring focus:border-primary transition-all duration-200; /* Simpler focus */
    }

    .alphabet-slider {
        @apply fixed right-4 top-20 bottom-4 bg-white/70 backdrop-blur-md p-2 rounded-lg shadow-xl z-30 flex flex-col items-center space-y-0.5 overflow-y-auto;
    }

    .alphabet-letter {
        @apply p-1.5 cursor-pointer hover:text-primary font-medium text-xs text-gray-700 rounded-md hover:bg-primary/10 transition-all duration-150;
    }

    .alphabet-scroller-horizontal {
        @apply w-full mx-auto;
        max-width: none;
    }

    .alphabet-letter-btn {
        @apply w-7 h-7 flex items-center justify-center text-sm font-medium text-muted-foreground rounded-md border border-border/30 bg-background/60 backdrop-blur-sm cursor-pointer select-none flex-shrink-0 shadow-sm;
        transition:
            color 0.1s ease,
            border-color 0.1s ease,
            background-color 0.1s ease,
            box-shadow 0.1s ease;
    }

    .alphabet-letter-btn:hover {
        @apply text-primary border-primary/50 bg-primary/10 shadow-md;
    }
}

.book-card {
    @apply bg-card border border-border rounded-xl p-4 shadow-md hover:shadow-lg transition-all duration-200 cursor-pointer h-full flex flex-col;
}

.author-card {
    @apply bg-card border border-border rounded-xl p-4 shadow-md hover:shadow-lg transition-all duration-200 cursor-pointer h-full flex flex-col;
}

.shelf-card {
    @apply bg-card border border-border rounded-xl p-4 shadow-md hover:shadow-lg transition-all duration-200 cursor-pointer h-full flex flex-col;
}

.status-badge {
    @apply px-2.5 py-0.5 rounded-full text-xs font-medium;
}
.status-unread {
    @apply bg-red-100 text-red-800;
}
.status-reading {
    @apply bg-yellow-100 text-yellow-800;
}
.status-read {
    @apply bg-green-100 text-green-800;
}

.truncate-text {
    @apply overflow-hidden text-ellipsis whitespace-nowrap;
}
